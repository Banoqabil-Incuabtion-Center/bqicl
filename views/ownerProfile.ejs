<% if (locals.userType==='admin' ) { %>
    <%- include('layouts/admin_layout_header', { title: 'Executive Profile' }) %>
        <% } else { %>
            <%- include('layouts/owner_layout_header', { title: 'Personal Profile' }) %>
                <% } %>

                    <div class="max-w-5xl mx-auto space-y-10">
                        <div
                            class="bg-white dark:bg-gray-800 rounded-[2.5rem] shadow-2xl overflow-hidden border border-gray-100 dark:border-gray-700 relative">
                            <div class="h-48 bg-gradient-to-r from-slate-900 to-indigo-950 relative overflow-hidden">
                                <div
                                    class="absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-20">
                                </div>
                                <div class="absolute inset-0 bg-black/20"></div>

                                <div class="absolute top-8 right-8 flex gap-3">
                                    <span
                                        class="px-6 py-2.5 rounded-2xl text-[10px] font-black uppercase tracking-[0.2em] border bg-white/10 text-white border-white/20 backdrop-blur-md shadow-2xl">
                                        Franchise Governor
                                    </span>
                                    <% if (locals.userType==='admin' ) { %>
                                        <a href="/owner/profile/edit/<%= owner.hashedId %>"
                                            class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2.5 rounded-2xl text-[10px] font-black uppercase tracking-widest transition-all shadow-lg shadow-blue-500/30 flex items-center gap-2">
                                            <i class="fas fa-user-edit"></i> Edit Account
                                        </a>
                                        <form action="/owner/profile/delete/<%= owner.hashedId %>" method="POST"
                                            class="inline">
                                            <button type="button"
                                                class="bg-red-500/20 hover:bg-red-500/40 text-white border border-red-500/30 px-6 py-2.5 rounded-2xl text-[10px] font-black uppercase tracking-widest transition-all flex items-center gap-2"
                                                onclick="document.getElementById('deleteModal-<%= owner.hashedId %>').classList.remove('hidden')">
                                                <i class="fas fa-user-minus"></i> Terminate
                                            </button>
                                            <%- include('partials/deleteModal', { itemName: owner.name,
                                                deleteUrl: '/owner/profile/delete/' + owner.hashedId,
                                                modalId: 'deleteModal-' + owner.hashedId }) %>
                                        </form>
                                        <% } %>
                                </div>
                            </div>

                            <div class="px-10 pb-12">
                                <div class="flex flex-col md:flex-row gap-10 items-start -mt-20 relative z-10">
                                    <div class="relative group">
                                        <div
                                            class="h-44 w-44 md:h-52 md:w-52 rounded-full border-8 border-white dark:border-gray-800 shadow-2xl overflow-hidden bg-gray-50 dark:bg-gray-700 flex items-center justify-center ring-4 ring-gray-100 dark:ring-gray-800/50 transition-transform group-hover:scale-105">
                                            <% if (owner.image) { %>
                                                <img src="<%= owner.image %>" alt="<%= owner.name %>"
                                                    class="h-full w-full object-cover">
                                                <% } else { %>
                                                    <div
                                                        class="h-full w-full flex items-center justify-center text-4xl font-black text-gray-200 dark:text-gray-600">
                                                        <%= owner.name.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase() %>
                            </div>
                        <% } %>
                    </div>
                    <div class="absolute bottom-6 right-6 h-8 w-8 rounded-full border-4 border-white dark:border-gray-800 bg-emerald-500 shadow-2xl ring-4 ring-emerald-500/20" title="System Active"></div>
                </div>

                <div class="flex-1 pt-6 md:pt-24">
                    <h1 class="text-4xl md:text-6xl font-black text-gray-900 dark:text-white tracking-tighter uppercase mb-3">
                        <%= owner.name %>
                    </h1>
                    <div class="flex flex-wrap items-center gap-6">
                        <div class="flex items-center gap-3 text-gray-500 dark:text-gray-400 text-xs font-bold uppercase tracking-widest">
                            <i class="fas fa-at text-blue-500"></i>
                            <%= owner.email %>
                        </div>
                        <div class="flex items-center gap-3 text-gray-500 dark:text-gray-400 text-xs font-bold uppercase tracking-widest">
                            <i class="fas fa-calendar-check text-indigo-500"></i>
                            Registered <%= new Date(owner.createdAt).toLocaleDateString(undefined, { month: ' short',
                                                            year: 'numeric' }) %>
                                                    </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="grid grid-cols-1 md:grid-cols-2 gap-10 mt-16">
                                    <div
                                        class="bg-gray-50 dark:bg-gray-900/40 p-10 rounded-[2.5rem] border border-gray-100 dark:border-gray-700 hover:border-blue-500/20 transition-all group">
                                        <h3
                                            class="text-gray-400 text-[10px] font-black uppercase tracking-[0.2em] mb-8 flex items-center gap-3">
                                            <i class="fas fa-shield-halved text-blue-500"></i> Franchise Control
                                        </h3>
                                        <% const team=owner.Team || owner.team; %>
                                            <% if (team) { %>
                                                <div class="flex items-center gap-8">
                                                    <div
                                                        class="h-24 w-24 rounded-3xl bg-white dark:bg-gray-800 border-2 border-gray-100 dark:border-gray-700 flex items-center justify-center overflow-hidden shadow-2xl group-hover:scale-110 transition-transform">
                                                        <% if (team.teamLogo) { %>
                                                            <img src="<%= team.teamLogo %>"
                                                                class="h-full w-full object-cover">
                                                            <% } else { %>
                                                                <i class="fas fa-shield-alt text-3xl text-gray-200"></i>
                                                                <% } %>
                                                    </div>
                                                    <div>
                                                        <h4
                                                            class="text-3xl font-black text-gray-900 dark:text-white mb-2 uppercase tracking-tighter">
                                                            <%= team.name %>
                                                        </h4>
                                                        <a href="/team/profile/<%= owner.teamId %>"
                                                            class="inline-flex items-center gap-2 text-blue-600 dark:text-blue-400 text-[10px] font-black uppercase tracking-widest hover:gap-4 transition-all">
                                                            Manage Franchise <i class="fas fa-arrow-right"></i>
                                                        </a>
                                                    </div>
                                                </div>
                                                <% } else { %>
                                                    <div
                                                        class="py-12 flex flex-col items-center justify-center text-center border-2 border-dashed border-gray-200 dark:border-gray-700 rounded-[2rem]">
                                                        <div
                                                            class="h-14 w-14 rounded-2xl bg-gray-100 dark:bg-gray-800 flex items-center justify-center mb-4 text-gray-300 dark:text-gray-600">
                                                            <i class="fas fa-plus-circle text-2xl"></i>
                                                        </div>
                                                        <p
                                                            class="text-gray-500 dark:text-gray-400 font-black text-[10px] uppercase tracking-widest">
                                                            No Franchise Assignment</p>
                                                        <p class="text-xs text-gray-400 mt-2 max-w-[200px]">This
                                                            executive is currently awaiting team allocation.</p>
                                                    </div>
                                                    <% } %>
                                    </div>

                                    <div
                                        class="bg-gray-50 dark:bg-gray-900/40 p-10 rounded-[2.5rem] border border-gray-100 dark:border-gray-700">
                                        <h3
                                            class="text-gray-400 text-[10px] font-black uppercase tracking-[0.2em] mb-8 flex items-center gap-3">
                                            <i class="fas fa-chart-line text-purple-500"></i> Administrative Insight
                                        </h3>
                                        <div class="grid grid-cols-2 gap-6">
                                            <div
                                                class="p-6 bg-white dark:bg-gray-800 rounded-3xl border border-gray-100 dark:border-gray-700 shadow-sm">
                                                <p
                                                    class="text-[10px] text-gray-400 uppercase font-black tracking-widest mb-1">
                                                    Contract Size</p>
                                                <p
                                                    class="text-3xl font-black text-gray-900 dark:text-white tracking-tighter">
                                                    <%= (team && team.playerCount) ? team.playerCount : 0 %>
                                                </p>
                                            </div>
                                            <div
                                                class="p-6 bg-white dark:bg-gray-800 rounded-3xl border border-gray-100 dark:border-gray-700 shadow-sm">
                                                <p
                                                    class="text-[10px] text-gray-400 uppercase font-black tracking-widest mb-1">
                                                    Auth Status</p>
                                                <div class="flex items-center gap-2 mt-2">
                                                    <span
                                                        class="h-2.5 w-2.5 rounded-full bg-emerald-500 shadow-lg shadow-emerald-500/50"></span>
                                                    <span
                                                        class="text-xs font-black text-emerald-600 dark:text-emerald-500 uppercase tracking-widest">Verified</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <% if (team && team.players && team.players.length> 0) { %>
                                    <div
                                        class="bg-white dark:bg-gray-800 rounded-[2.5rem] border border-gray-100 dark:border-gray-700 overflow-hidden shadow-2xl mt-12">
                                        <div
                                            class="px-10 py-8 border-b border-gray-50 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-700/30 flex justify-between items-center">
                                            <h3
                                                class="text-gray-900 dark:text-white text-[10px] font-black uppercase tracking-[0.2em] flex items-center gap-3">
                                                <i class="fas fa-users-rectangle text-emerald-500"></i> Contracted
                                                Personnel
                                            </h3>
                                            <span
                                                class="bg-gray-900 dark:bg-gray-700 text-white text-[10px] px-4 py-2 rounded-full font-black tracking-widest">
                                                <%= team.players.length %> TOTAL ASSETS
                                            </span>
                                        </div>
                                        <div class="overflow-x-auto">
                                            <table class="w-full text-left">
                                                <thead
                                                    class="bg-white dark:bg-gray-800 text-[10px] uppercase text-gray-400 font-black tracking-[0.2em]">
                                                    <tr>
                                                        <th class="px-10 py-6">Player Identity</th>
                                                        <th class="px-10 py-6">Classification</th>
                                                        <th class="px-10 py-6">Investment</th>
                                                        <th class="px-10 py-6 text-right">Dossier</th>
                                                    </tr>
                                                </thead>
                                                <tbody class="divide-y divide-gray-50 dark:divide-gray-700/50">
                                                    <% team.players.forEach(player=> { %>
                                                        <tr
                                                            class="hover:bg-blue-50/30 dark:hover:bg-blue-500/5 transition-all group">
                                                            <td class="px-10 py-5">
                                                                <div
                                                                    class="text-sm font-black text-gray-900 dark:text-white group-hover:text-blue-600 transition-colors">
                                                                    <%= player.name %>
                                                                </div>
                                                            </td>
                                                            <td class="px-10 py-5">
                                                                <span
                                                                    class="bg-gray-100 dark:bg-gray-700 group-hover:bg-emerald-500/10 text-gray-500 dark:text-gray-400 group-hover:text-emerald-500 border border-gray-200 dark:border-gray-600 group-hover:border-emerald-500/20 px-4 py-1.5 rounded-full text-[10px] uppercase font-black tracking-widest transition-all">
                                                                    <%= player.category %>
                                                                </span>
                                                            </td>
                                                            <td class="px-10 py-5">
                                                                <div
                                                                    class="text-sm font-black text-gray-900 dark:text-white tabular-nums tracking-tighter">
                                                                    <%= (player.soldPrice) ?
                                                                        player.soldPrice.toLocaleString() : "0" %>
                                                                </div>
                                                            </td>
                                                            <td class="px-10 py-5 text-right">
                                                                <a href="/player/profile/<%= encodeId(player.id) %>"
                                                                    class="h-10 w-10 inline-flex items-center justify-center text-gray-400 hover:text-blue-500 hover:bg-blue-500/10 rounded-xl transition-all border border-transparent hover:border-blue-500/20">
                                                                    <i class="fas fa-chevron-right text-xs"></i>
                                                                </a>
                                                            </td>
                                                        </tr>
                                                        <% }) %>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <% } %>
                            </div>
                        </div>
                    </div>

                    <% if (locals.userType==='admin' ) { %>
                        <%- include('layouts/admin_layout_footer') %>
                            <% } else { %>
                                <%- include('layouts/owner_layout_footer') %>
                                    <% } %>